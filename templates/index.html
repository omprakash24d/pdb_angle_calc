<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Upload a PDB file to calculate Phi and Psi angles. View results instantly without page reload."
    />
    <meta
      name="keywords"
      content="PDB, Bioinformatics, Phi Angle, Psi Angle, CSV Viewer"
    />
    <meta name="author" content="Your Name" />
    <title>PDB Angle Calculator</title>

    <!-- External CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/styles.css') }}"
    />

    <!-- Bootstrap Icons -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css"
      rel="stylesheet"
    />
  </head>

  <body>
    <!-- Header Section -->
    <header class="bg-dark text-white py-3">
      <div class="container text-center">
        <h1>PDB Angle Calculator</h1>
        <p>Upload your PDB file and view results instantly!</p>
      </div>
    </header>

    <!-- Main Content Section -->
    <main class="container my-5">
      <section class="card shadow">
        <div class="card-body">
          <!-- Upload Form -->
          <section class="container-fluid">
            <h2 class="card-title text-center mb-4">Upload Your PDB File</h2>
            <form
              id="uploadForm"
              class="text-center p-4 shadow-lg rounded bg-light"
            >
              <div class="mb-4">
                <label for="fileInput" class="form-label fw-bold fs-5"
                  >Select Your PDB File:</label
                >
                <input
                  type="file"
                  name="file"
                  accept=".pdb"
                  class="form-control border-primary rounded-pill"
                  id="fileInput"
                  required
                />
                <small class="form-text text-muted d-block mt-2">
                  Only `.pdb` files are supported. Max size: 10MB.
                </small>
              </div>

              <button
                type="submit"
                class="btn btn-primary rounded-pill px-4 py-2 fs-6"
              >
                <i class="bi bi-cloud-upload-fill"></i> Upload and Calculate
              </button>
            </form>
          </section>

          <!-- Loading Indicator -->
          <section id="loading" class="text-center my-3" style="display: none">
            <div class="spinner-border text-primary" role="status"></div>
            <p>Processing...</p>
          </section>

          <!-- Results Section -->
          <section id="results" class="mt-5 w-100" style="display: none">
            <h3>Results</h3>

            <!-- Results Table -->
            <div
              id="resultsTable"
              class="table-responsive border rounded"
              style="max-height: 300px; overflow-y: auto"
            >
              <table class="table table-striped">
                <thead class="table-dark sticky-top">
                  <tr>
                    <th>PDB Code</th>
                    <th>Chain ID</th>
                    <th>Residue</th>
                    <th>Residue ID</th>
                    <th>Phi (°)</th>
                    <th>Psi (°)</th>
                  </tr>
                </thead>
                <tbody id="resultsBody"></tbody>
              </table>
            </div>

            <!-- Download Options -->
            <div class="text-center mt-4">
              <button class="btn btn-success" onclick="download('csv')">
                Download CSV
              </button>
              <button class="btn btn-info" onclick="download('excel')">
                Download Excel
              </button>
              <button class="btn btn-warning" onclick="download('txt')">
                Download TXT
              </button>
              <button class="btn btn-danger" onclick="download('pdf')">
                Download PDF
              </button>
            </div>
          </section>

          <!-- Error Message -->
          <section
            id="error"
            class="alert alert-danger mt-3"
            style="display: none"
          ></section>
        </div>
      </section>
    </main>

    <!-- Footer Section -->
    <footer class="bg-dark text-white py-3 mt-5">
      <div class="container text-center">
        <p>&copy; 2024 PDB Angle Calculator | All Rights Reserved</p>
        <p>Designed for Bioinformatics enthusiasts</p>
      </div>
    </footer>

    <!-- External JS -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  </body>
</html>
