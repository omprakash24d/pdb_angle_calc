<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="Upload a PDB file to calculate Phi and Psi angles. View results instantly without page reload. Supports multiple formats: CSV, PDF, Excel, and TXT."
    />
    <meta
      name="keywords"
      content="PDB, Bioinformatics, Phi Angle, Psi Angle, Protein Structure, CSV Viewer, Excel Viewer, Download Results, PDF Download, Bioinformatics Tools, Protein Data Bank"
    />
    <meta name="author" content="Om Prakash" />

    <!-- Open Graph Meta Tags for Social Media Sharing -->
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="PDB Angle Calculator - Bioinformatics Tool"
    />
    <meta
      property="og:description"
      content="Upload your PDB file and instantly calculate Phi and Psi angles. Download results in CSV, Excel, TXT, or PDF."
    />
    <meta
      property="og:image"
      content="{{ url_for('static', filename='images/og-image.jpg') }}"
    />
    <meta property="og:url" content="{{ request.url }}" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="PDB Angle Calculator - Bioinformatics Tool"
    />
    <meta
      name="twitter:description"
      content="Upload your PDB file and instantly calculate Phi and Psi angles. Download results in CSV, Excel, TXT, or PDF."
    />
    <meta
      name="twitter:image"
      content="{{ url_for('static', filename='images/twitter-card.jpg') }}"
    />

    <!-- Structured Data - JSON-LD for Search Engines -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "PDB Angle Calculator",
        "description": "Upload your PDB file and instantly calculate Phi and Psi angles. Download results in CSV, Excel, TXT, or PDF.",
        "url": "{{ request.url }}",
        "image": "{{ url_for('static', filename='images/og-image.jpg') }}",
        "author": {
          "@type": "Person",
          "name": "Om Prakash"
        },
        "publisher": {
          "@type": "Organization",
          "name": "Your Organization Name"
        },
        "potentialAction": {
          "@type": "Action",
          "name": "Upload and Calculate PDB Angles"
        }
      }
    </script>

    <title>PDB Angle Calculator</title>

    <!-- External CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/styles.css') }}"
    />

    <!-- Bootstrap Icons -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  </head>

  <body>
    <!-- Header Section -->
    <header class="header-section">
      <div class="container">
        <!-- Navigation Bar -->
        <nav class="navbar navbar-expand-lg navbar-dark">
          <a class="navbar-brand" href="https://pdb.indhinditech.com/">
            PDB Angle Calculator
          </a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
              <li class="nav-item">
                <a class="nav-link" href="#about">About</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#download-pdb">Download PDB</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#documentation">Documentation</a>
              </li>
            </ul>
          </div>
        </nav>

        <!-- Tagline Section -->
        <div class="header-content text-center mt-4">
          <p class="lead text-white mt-4">
            Effortlessly calculate Phi and Psi angles from your PDB files and
            download the results in various formats.
          </p>
        </div>
      </div>
    </header>

    <!-- Main Content Section -->
    <main class="container my-5">
      <section class="container-fluid py-5" id="uploadSection">
        <div class="row justify-content-center">
          <div class="col-md-8 col-lg-6">
            <!-- Form Container -->
            <form id="uploadForm" class="p-4 shadow-lg rounded bg-white">
              <!-- File Input -->
              <div class="mb-4">
                <label for="fileInput" class="form-label fw-bold fs-5 text-secondary">
                  Select Your PDB File:
                </label>
                <input
                  type="file"
                  name="file"
                  accept=".pdb"
                  class="form-control border-primary rounded-pill"
                  id="fileInput"
                  required
                />
                <small class="form-text text-muted d-block mt-2">
                  Only `.pdb` files are supported. Max size: 10MB.
                </small>
              </div>
      
              <!-- File Upload Button -->
              <div class="text-center">
                <button
                  type="submit"
                  class="btn btn-primary rounded-pill px-5 py-3 fs-5 shadow-sm position-relative"
                >
                  <i class="bi bi-cloud-upload-fill"></i> Upload and Calculate
                  
                </button>
              </div>
            </form>
          </div>
        </div>
      </section>
      

          <!-- Enhanced Loading Indicator -->
          <section id="loading" class="text-center my-5" style="display: none">
            <div
              class="spinner-border text-primary"
              role="status"
              style="width: 3rem; height: 3rem"
            >
              <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3 fs-4 text-secondary">Processing, please wait...</p>
            <p class="text-muted fs-5">
              Your file is being processed. This may take a moment.
            </p>
          </section>

          <!-- Results Section -->
          <section id="results" class="mt-5 w-100" style="display: none;">
            <h3 class="text-center text-primary mb-4">Results</h3>
          
            <!-- Results Table -->
            <div
              id="resultsTable"
              class="table-responsive border rounded-3 shadow-sm"
              style="max-height: 400px; overflow-y: auto;"
            >
              <table class="table table-striped table-hover">
                <thead class="table-dark sticky-top">
                  <tr>
                    <th>PDB Code</th>
                    <th>Chain ID</th>
                    <th>Residue</th>
                    <th>Residue ID</th>
                    <th>Phi (°)</th>
                    <th>Psi (°)</th>
                  </tr>
                </thead>
                <tbody id="resultsBody"></tbody>
              </table>
            </div>
          
            <!-- Download Options -->
            <div class="text-center mt-5">
              <h4 class="mb-4 text-muted">Download Results As:</h4>
              <div class="btn-group" role="group" aria-label="Download Options">
                <!-- CSV Button -->
                <button
                  class="btn btn-success rounded-pill px-4 py-2 shadow-sm"
                  onclick="download('csv')"
                  data-bs-toggle="tooltip"
                  data-bs-placement="top"
                  title="Download as CSV"
                >
                  <i class="bi bi-file-earmark-spreadsheet me-2"></i> CSV
                </button>
          
                <!-- TXT Button -->
                <button
                  class="btn btn-warning rounded-pill px-4 py-2 shadow-sm"
                  onclick="download('txt')"
                  data-bs-toggle="tooltip"
                  data-bs-placement="top"
                  title="Download as TXT"
                >
                  <i class="bi bi-file-earmark-text me-2"></i> TXT
                </button>
          
                <!-- PDF Button -->
                <button
                  class="btn btn-danger rounded-pill px-4 py-2 shadow-sm"
                  onclick="download('pdf')"
                  data-bs-toggle="tooltip"
                  data-bs-placement="top"
                  title="Download as PDF"
                >
                  <i class="bi bi-file-earmark-pdf me-2"></i> PDF
                </button>
              </div>
            </div>
          </section>
          
          
          
          <!-- Bootstrap Tooltip Initialization (to display tooltips) -->
          <script>
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
              return new bootstrap.Tooltip(tooltipTriggerEl)
            })
          </script>
          

          <!-- Error Message -->
          <section
            id="error"
            class="alert alert-danger mt-3"
            style="display: none"
          ></section>
        </div>
      </section>
    </main>

    <!-- Footer Section -->
    <footer class="bg-dark text-white py-3 mt-5">
      <div class="container text-center">
        <p>&copy; 2024 PDB Angle Calculator | All Rights Reserved</p>
        <p>
          Designed and Developed by
          <a
            href="https://indhinditech.com"
            target="_blank"
            class="text-white font-weight-bold hover-underline"
            >Om Prakash</a
          >
        </p>
        <p class="mt-2">
          Central University Of South Bihar (Department Of Bioinformatics)
        </p>
      </div>
    </footer>

    <!-- External JS -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  </body>
</html>
